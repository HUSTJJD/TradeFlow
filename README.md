# æ™ºèƒ½äº¤æ˜“ç³»ç»Ÿ v2.0

ä¸€ä¸ªæ”¯æŒå¤šåˆ¸å•†APIçš„æ™ºèƒ½äº¤æ˜“ç³»ç»Ÿï¼Œå…·å¤‡æ ‡çš„ç­›é€‰ã€è‡ªåŠ¨äº¤æ˜“ã€å›æµ‹åˆ†æå’ŒGUIç•Œé¢åŠŸèƒ½ã€‚

## ğŸš€ æ–°ç‰¹æ€§

### å¤šåˆ¸å•†APIæ”¯æŒ
- **é•¿æ¡¥è¯åˆ¸**: æ”¯æŒæ¸¯è‚¡ã€ç¾è‚¡äº¤æ˜“
- **Interactive Brokers (IBKR)**: æ”¯æŒå…¨çƒå¸‚åœºäº¤æ˜“  
- **QMT**: æ”¯æŒAè‚¡é‡åŒ–äº¤æ˜“

### æ™ºèƒ½åˆ¸å•†é€‰æ‹©
- è‡ªåŠ¨æ ¹æ®å¸‚åœºé€‰æ‹©æœ€ä¼˜åˆ¸å•†
- æ”¯æŒåˆ¸å•†æ•…éšœè‡ªåŠ¨åˆ‡æ¢
- ç»Ÿä¸€çš„å¤šåˆ¸å•†è´¦æˆ·ç®¡ç†

### ç°ä»£åŒ–GUIç•Œé¢
- ç›´è§‚çš„ä»ªè¡¨ç›˜ç•Œé¢
- å®æ—¶ç³»ç»ŸçŠ¶æ€ç›‘æ§
- å›¾å½¢åŒ–äº¤æ˜“æ“ä½œ
- å¤šæ ‡ç­¾é¡µç®¡ç†

## ğŸ“‹ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **æ ‡çš„ç­›é€‰**: éäº¤æ˜“æ—¶æ®µè‡ªåŠ¨ç­›é€‰å…¨å¸‚åœºæ ‡çš„
- **è‡ªåŠ¨äº¤æ˜“**: äº¤æ˜“æ—¶æ®µåŸºäºç­–ç•¥ä¿¡å·æ‰§è¡Œäº¤æ˜“
- **å›æµ‹åˆ†æ**: å†å²æ•°æ®å›æµ‹å’Œç­–ç•¥ä¼˜åŒ–
- **é£é™©ç®¡ç†**: å¤šå±‚æ¬¡é£é™©æ§åˆ¶å’Œä»“ä½ç®¡ç†

### å¸‚åœºæ”¯æŒ
- **Aè‚¡å¸‚åœº**: è‚¡ç¥¨ã€ETF
- **æ¸¯è‚¡å¸‚åœº**: è‚¡ç¥¨ã€ETFã€çªè½®ã€ç‰›ç†Šè¯  
- **ç¾è‚¡å¸‚åœº**: è‚¡ç¥¨ã€ETFã€æœŸæƒ

### æŠ€æœ¯ç‰¹æ€§
- æ¨¡å—åŒ–æ¶æ„ï¼Œé«˜å¯æ‰©å±•æ€§
- æ”¯æŒå®æ—¶æ•°æ®å’Œå†å²æ•°æ®
- å¤šç§æŠ€æœ¯æŒ‡æ ‡å’Œç­–ç•¥æ¨¡æ¿
- å®Œæ•´çš„æ—¥å¿—å’Œé”™è¯¯å¤„ç†

## ğŸ›  å®‰è£…æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- Python 3.8+
- Windows/Linux/macOS

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/HUSTJJD/TradeFlow.git
cd trading-system
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **é…ç½®åˆ¸å•†API**
ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œé…ç½®å„åˆ¸å•†APIå‚æ•°ï¼š

```yaml
brokers:
  longport:
    enabled: true
    app_key: "your_app_key"
    app_secret: "your_app_secret"
    access_token: "your_access_token"
  
  ibkr:
    enabled: true  
    host: "127.0.0.1"
    port: 7497
    client_id: 1
```

4. **éªŒè¯é…ç½®**
```bash
python main.py --validate-config
```

## ğŸ® ä½¿ç”¨æŒ‡å—

### å›¾å½¢ç•Œé¢æ¨¡å¼ï¼ˆæ¨èï¼‰
```bash
python main.py --mode gui
```

### å‘½ä»¤è¡Œæ¨¡å¼
```bash
# è¿è¡Œæ ‡çš„ç­›é€‰
python main.py --mode cli --screening

# è¿è¡Œäº¤æ˜“æ¨¡å¼  
python main.py --mode cli --trading

# æ˜¾ç¤ºåˆ¸å•†çŠ¶æ€
python main.py --mode cli --broker-status
```

### åå°æœåŠ¡æ¨¡å¼
```bash
python main.py --mode daemon
```

## ğŸ“Š ç³»ç»Ÿæ¶æ„

### æ¨¡å—ç»“æ„
```
modules/
â”œâ”€â”€ broker_apis/          # å¤šåˆ¸å•†APIæŠ½è±¡å±‚
â”‚   â”œâ”€â”€ broker_interface.py
â”‚   â”œâ”€â”€ broker_factory.py
â”‚   â”œâ”€â”€ broker_manager.py
â”‚   â””â”€â”€ brokers/          # å…·ä½“åˆ¸å•†å®ç°
â”œâ”€â”€ config/               # é…ç½®ç®¡ç†
â”œâ”€â”€ gui/                  # GUIç•Œé¢
â”œâ”€â”€ market_data/          # å¸‚åœºæ•°æ®
â”œâ”€â”€ product_types/        # äº§å“ç±»å‹
â”œâ”€â”€ screening_strategies/ # ç­›é€‰ç­–ç•¥
â”œâ”€â”€ trading_execution/    # äº¤æ˜“æ‰§è¡Œ
â”œâ”€â”€ backtesting/          # å›æµ‹åˆ†æ
â””â”€â”€ utils/                # å·¥å…·å‡½æ•°
```

### åˆ¸å•†APIæ¶æ„
```mermaid
graph TB
    A[äº¤æ˜“ç³»ç»Ÿ] --> B[åˆ¸å•†ç®¡ç†å™¨]
    B --> C[é•¿æ¡¥API]
    B --> D[IBKR API] 
    B --> E[QMT API]

    H[Aè‚¡å¸‚åœº] --> E
    H --> F
    H --> G
    I[æ¸¯è‚¡å¸‚åœº] --> C
    J[ç¾è‚¡å¸‚åœº] --> C
    J --> D
```

## âš™ï¸ é…ç½®è¯´æ˜

### ä¸»è¦é…ç½®é¡¹

**åˆ¸å•†é…ç½®** (`brokers` section):
- `enabled`: æ˜¯å¦å¯ç”¨è¯¥åˆ¸å•†
- APIè®¤è¯å‚æ•°ï¼ˆå„åˆ¸å•†ä¸åŒï¼‰
- æ‰‹ç»­è´¹ç‡é…ç½®
- æ”¯æŒçš„åŠŸèƒ½ç‰¹æ€§

**å¸‚åœºæ˜ å°„** (`market_broker_mapping`):
```yaml
market_broker_mapping:
  HK: "longport"    # æ¸¯è‚¡â†’é•¿æ¡¥
  US: "ibkr"        # ç¾è‚¡â†’IBKR  
  CN: "qmt"         # Aè‚¡â†’QMT
```

**äº¤æ˜“ç­–ç•¥** (`trading` section):
- ä»“ä½ç®¡ç†å‚æ•°
- é£é™©æ§åˆ¶è§„åˆ™
- äº¤æ˜“é¢‘ç‡é™åˆ¶

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åˆ¸å•†

1. åœ¨ `modules/broker_apis/brokers/` åˆ›å»ºæ–°çš„åˆ¸å•†ç±»
2. å®ç° `BrokerInterface` æ¥å£
3. åœ¨ `BrokerFactory` ä¸­æ³¨å†Œæ–°åˆ¸å•†
4. æ›´æ–°é…ç½®æ–‡ä»¶æ¨¡æ¿

### ç¤ºä¾‹ï¼šæ·»åŠ æ–°åˆ¸å•†
```python
# modules/broker_apis/brokers/new_broker.py
from ..broker_interface import BrokerInterface

class NewBroker(BrokerInterface):
    def connect(self):
        # å®ç°è¿æ¥é€»è¾‘
        pass
    
    def submit_order(self, symbol, side, order_type, quantity, price):
        # å®ç°ä¸‹å•é€»è¾‘
        pass
```

### æ‰©å±•GUIç•Œé¢

GUIç•Œé¢ä½¿ç”¨Tkinteræ„å»ºï¼Œæ”¯æŒè‡ªå®šä¹‰ç»„ä»¶ï¼š

```python
# modules/gui/new_panel.py
import tkinter as tk
from tkinter import ttk

class NewPanel(ttk.Frame):
    def __init__(self, parent):
        super().__init__(parent)
        self._create_widgets()
    
    def _create_widgets(self):
        # åˆ›å»ºç•Œé¢ç»„ä»¶
        pass
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### æ•°æ®ç¼“å­˜
- å®æ—¶æ•°æ®æœ¬åœ°ç¼“å­˜
- å†å²æ•°æ®æ‰¹é‡é¢„åŠ è½½
- æ™ºèƒ½æ•°æ®æ›´æ–°ç­–ç•¥

### å¹¶å‘å¤„ç†
- å¤šçº¿ç¨‹æ•°æ®è·å–
- å¼‚æ­¥è®¢å•å¤„ç†
- è¿æ¥æ± ç®¡ç†

### å†…å­˜ç®¡ç†
- å¤§æ•°æ®åˆ†å—å¤„ç†
- è‡ªåŠ¨å†…å­˜æ¸…ç†
- æ€§èƒ½ç›‘æ§å‘Šè­¦

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**åˆ¸å•†è¿æ¥å¤±è´¥**
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- éªŒè¯APIå¯†é’¥
- ç¡®è®¤äº¤æ˜“æ—¶é—´

**æ•°æ®è·å–å¼‚å¸¸**
- æ£€æŸ¥æ•°æ®æºå¯ç”¨æ€§
- éªŒè¯APIé¢‘ç‡é™åˆ¶
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—

**äº¤æ˜“æ‰§è¡Œé”™è¯¯**
- æ£€æŸ¥è´¦æˆ·ä½™é¢
- éªŒè¯è®¢å•å‚æ•°
- ç¡®è®¤å¸‚åœºçŠ¶æ€

### æ—¥å¿—æŸ¥çœ‹
ç³»ç»Ÿæ—¥å¿—ä¿å­˜åœ¨ `trading_system.log`ï¼š
```bash
tail -f trading_system.log
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Issueå’ŒPull Requestï¼

### å¼€å‘æµç¨‹
1. Forkæœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯
3. æäº¤ä»£ç å˜æ›´
4. åˆ›å»ºPull Request

### ä»£ç è§„èŒƒ
- éµå¾ªPEP 8è§„èŒƒ
- æ·»åŠ ç±»å‹æ³¨è§£
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°æ–‡æ¡£

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚

## ğŸ“ è”ç³»æ–¹å¼

- é¡¹ç›®ä¸»é¡µ: https://github.com/HUSTJJD/TradeFlow
- é—®é¢˜åé¦ˆ: https://github.com/HUSTJJD/TradeFlow/issues
- é‚®ç®±: your-email@example.com

---

**å…è´£å£°æ˜**: æœ¬ç³»ç»Ÿä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œå®é™…äº¤æ˜“è¯·è°¨æ…è¯„ä¼°é£é™©ã€‚ä½œè€…ä¸å¯¹ä»»ä½•æŠ•èµ„æŸå¤±è´Ÿè´£ã€‚