# 智能交易系统配置文件
# 支持多券商API和GUI界面
#
# 使用说明：
# 1. 请将your_开头的占位符替换为实际的配置值
# 2. 启用券商前请确保已安装对应的SDK和配置正确的API密钥
# 3. 建议先启用一个券商进行测试

# 券商配置
brokers:
  longport:
    enabled: true
    description: "长桥证券 - 支持港股、美股"
    app_key: "your_app_key_here"  # 请替换为实际的长桥App Key
    app_secret: "your_app_secret_here"  # 请替换为实际的长桥App Secret
    access_token: "your_access_token_here"  # 请替换为实际的长桥Access Token
    commission_rate: 0.001
    min_commission: 0
    supported_features: 
      - "real_time_data"
      - "historical_data" 
      - "trading"
      - "portfolio"
    test_connection: true

  ibkr:
    enabled: true
    description: "Interactive Brokers - 支持全球市场"
    host: "127.0.0.1"
    port: 7497
    client_id: 1
    account: "your_ibkr_account"  # 请替换为实际的IBKR账户号
    commission_rate: 0.0005
    min_commission: 1.0
    supported_features:
      - "real_time_data"
      - "historical_data"
      - "trading"
      - "portfolio"
      - "options"
    test_connection: true

  qmt:
    enabled: false  # 需要安装QMT平台，建议先禁用
    description: "QMT量化交易平台 - 支持A股"
    account_id: "your_qmt_account_id"  # 请替换为实际的QMT账户ID
    simulated: true
    commission_rate: 0.0003
    min_commission: 5.0
    supported_features:
      - "real_time_data"
      - "historical_data"
      - "trading"
      - "quant_strategy"
    test_connection: false

# 市场与券商映射
market_broker_mapping:
  HK: "longport"  # 港股使用长桥
  US: "ibkr"        # 美股使用IBKR
  CN: "qmt"         # A股使用QMT

# 市场配置
markets:
  HK:
    enabled: true
    trading_hours: "09:30-16:00"
    timezone: "Asia/Hong_Kong"
    
  US:
    enabled: true  
    trading_hours: "21:30-04:00"
    timezone: "America/New_York"
    
  CN:
    enabled: false
    trading_hours: "09:30-15:00"
    timezone: "Asia/Shanghai"

# 产品配置
products:
  stock:
    enabled: true
    min_volume: 1000000
    max_volatility: 0.5
    
  etf:
    enabled: true
    min_volume: 500000
    max_volatility: 0.3
    
  warrant:
    enabled: false
    min_volume: 100000
    max_volatility: 1.0
    
  cbbc:
    enabled: false
    min_volume: 50000
    max_volatility: 1.5
    
  option:
    enabled: false
    min_volume: 100
    max_volatility: 2.0

# 筛选配置
screening:
  batch_size: 100
  min_volume: 1000000
  max_volatility: 0.5
  rsi_threshold: 30
  ma_period: 20
  score_threshold: 7.0
  max_candidates: 50
  
  # 技术指标权重
  weights:
    rsi: 0.2
    ma: 0.3
    volume: 0.2
    volatility: 0.1
    analyst: 0.2

# 交易配置
trading:
  max_position_size: 0.1
  stop_loss: 0.05
  take_profit: 0.15
  commission_rate: 0.001
  max_daily_trades: 10
  min_trade_size: 1000
  
  # 风险管理
  risk_management:
    max_drawdown: 0.1
    max_sector_exposure: 0.3
    max_single_position: 0.2
    volatility_limit: 0.5

# 回测配置
backtest:
  enabled: true
  initial_cash: 1000000.0
  auto_backtest: false
  default_start_date: "2024-01-01"
  default_end_date: "2024-12-31"
  max_backtest_days: 1825  # 5年
  risk_free_rate: 0.02
  commission: 0.001
  slippage: 0.001
  
  # 回测指标
  metrics:
    - "total_return"
    - "annual_return"
    - "sharpe_ratio"
    - "max_drawdown"
    - "win_rate"

# GUI界面配置
gui:
  theme: "dark"  # light, dark, system
  auto_start: false
  update_interval: 1000  # 毫秒
  show_notifications: true
  save_window_state: true
  
  # 图表配置
  charts:
    candlestick: true
    technical_indicators: true
    performance: true
    risk_metrics: true
    
  # 数据显示配置
  display:
    decimal_places: 2
    currency_symbol: "¥"
    date_format: "YYYY-MM-DD"
    time_format: "HH:mm:ss"

# 日志配置
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "trading_flow.log"
  max_size: 10485760  # 10MB
  backup_count: 5
  format: "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# 系统配置
system:
  data_cache: true
  cache_size: 1000
  auto_update: false
  performance_monitoring: true
  error_handling: "graceful"  # graceful, strict
  
  # 定时任务
  scheduled_tasks:
    screening:
      enabled: true
      interval: 60  # 分钟
      only_non_trading_hours: true
      
    trading:
      enabled: true  
      interval: 30  # 分钟
      only_trading_hours: true
      
    backup:
      enabled: true
      interval: 1440  # 24小时
      keep_days: 7

# 高级配置（谨慎修改）
advanced:
  # API频率限制
  rate_limiting:
    quotes_per_second: 10
    trades_per_minute: 30
    concurrent_requests: 5
    
  # 数据质量
  data_quality:
    min_data_points: 100
    max_data_gap: 3600  # 秒
    auto_fill_missing: true
    
  # 性能优化
  performance:
    use_multiprocessing: true
    max_workers: 4
    chunk_size: 100
    memory_limit: "2GB"